import { describe, expect, test } from '@jest/globals'
import BNN from '../src'

describe('learning', () => {
  test('simple test', async () => {
    const bayes = BNN()
    const sLayer = bayes.addLayer('standard')
    sLayer.setNormalizer(async (phrase) => {
      let p = phrase
      // Remove standard spaces
      p = p.replace(/(DIN)\s*(\d+)/gm, '$1:$2')
      // Split sizes
      // p = p.replace(/(\d+)x(\d+)/gm, 's1:$1 s2:$2')
      return p
    })

    await sLayer.learn('DIN 933', 'DIN 933')

    await sLayer.learn('Bolt DIN 933', 'DIN 933')

    await sLayer.learn('Bolt 5x6 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x10 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x12 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x16 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x20 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x25 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x30 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x35 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x40 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x45 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x50 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x55 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x60 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x65 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x70 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x80 DIN 933', 'DIN 933')

    await sLayer.learn('Bolt 5x6 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x8 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x10 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x12 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x16 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x20 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x25 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x30 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x35 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x40 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x45 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x50 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x55 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x60 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x65 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x70 10.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x80 10.9 DIN 933', 'DIN 933')

    await sLayer.learn('Bolt 5x6 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x8 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x10 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x12 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x16 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x20 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x25 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x30 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x35 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x40 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x45 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x50 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x55 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x60 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x65 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x70 8.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x80 8.8 DIN 933', 'DIN 933')

    await sLayer.learn('Bolt 5x6 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x8 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x10 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x12 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x16 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x20 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x25 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x30 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x35 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x40 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x45 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x50 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x55 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x60 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x65 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x70 5.8 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x80 5.8 DIN 933', 'DIN 933')

    await sLayer.learn('Bolt 5x6 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x8 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x10 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x12 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x16 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x20 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x25 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x30 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x35 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x40 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x45 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x50 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x55 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x60 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x65 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x70 12.9 DIN 933', 'DIN 933')
    await sLayer.learn('Bolt 5x80 12.9 DIN 933', 'DIN 933')


    await sLayer.learn('DIN 931', 'DIN 931')

    await sLayer.learn('Bolt DIN 931', 'DIN 931')

    await sLayer.learn('Bolt 5x6 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x10 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x12 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x16 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x20 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x25 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x30 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x35 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x40 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x45 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x50 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x55 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x60 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x65 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x70 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x80 DIN 931', 'DIN 931')

    await sLayer.learn('Bolt 5x6 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x8 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x10 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x12 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x16 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x20 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x25 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x30 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x35 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x40 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x45 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x50 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x55 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x60 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x65 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x70 10.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x80 10.9 DIN 931', 'DIN 931')

    await sLayer.learn('Bolt 5x6 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x8 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x10 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x12 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x16 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x20 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x25 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x30 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x35 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x40 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x45 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x50 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x55 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x60 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x65 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x70 8.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x80 8.8 DIN 931', 'DIN 931')

    await sLayer.learn('Bolt 5x6 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x8 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x10 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x12 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x16 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x20 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x25 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x30 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x35 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x40 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x45 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x50 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x55 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x60 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x65 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x70 5.8 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x80 5.8 DIN 931', 'DIN 931')

    await sLayer.learn('Bolt 5x6 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x8 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x10 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x12 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x16 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x20 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x25 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x30 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x35 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x40 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x45 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x50 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x55 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x60 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x65 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x70 12.9 DIN 931', 'DIN 931')
    await sLayer.learn('Bolt 5x80 12.9 DIN 931', 'DIN 931')

    // console.log(sLayer.vocabulary)
    // console.log(sLayer.classes)

    console.log(await sLayer.classify('Болт ЦКИ DIN931 М16х60 усилен закалкой 8.8 Ц 25 шт. 49642'))
    // console.log(await sLayer.classify('Bolt 5x20 12.9 DIN 931'))

    expect(true).toBeTruthy()
  })
})
